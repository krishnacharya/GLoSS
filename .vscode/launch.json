// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/GPT4Rec-repro/generation_stepthru.py",
//             "console": "integratedTerminal",
//             "args": "${command:pickArgs}",
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0" // Adjust as needed (e.g., "0,1" for multiple GPUs)
//             }
//         }
//     ]
// }
// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/GPT4Rec-repro/log-likelihoodcalc_stepthru.py", // Updated to new script
//             "console": "integratedTerminal",
//             "args": [],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "1" // Adjust as needed (e.g., "0,1" for multiple GPUs)
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/scripts/finetune_llamabackbone.py",
//             "console": "integratedTerminal",
//             "args": [],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "1"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/scripts/finetune_llamabackbone.py",
//             "console": "integratedTerminal",
//             "args": [],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "1"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/scripts/finetune_configs.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--config", "/home/kacharya33/nanoGenRec/ft_configs/llama3b_1024_beauty.yml"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "1"
//             }
//         }
//     ]
// }
// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/scripts/calc_irmetrics_beauty2014.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--meta_file","meta_corpus.json",
//                 "--generated_file", "Llama-3.2-1B-ftbeauty2014_validation_beam5.json",
//                 "--retriever_index", "amznbeauty2014_index",
//                 "--num_sequences", "5"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "1"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/scripts/generate_candidatequeries.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--model_name", "smollm-checkpoint-8100",
//                 "--dataset_name", "beauty2014",
//                 "--dataset_split", "validation",
//                 "--max_seq_length", "1024",
//                 "--batch_size", "8",
//                 "--num_beams", "5",
//                 "--num_return_sequences", "5",
//                 "--load_in_4bit", "False"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "1"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/scripts/generate_candidates_sampled.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--model_name", "llama-3b-16kcpt",
//                 "--dataset_name", "beauty2014",
//                 "--dataset_split", "validation",
//                 "--max_seq_length", "1024",
//                 "--batch_size", "8",
//                 "--num_return_sequences", "5",
//                 "--temperature", "0.2",
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "1"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/scripts/generate_candidates_beam.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--model_name", "llama8B-5.5k",
//                 "--dataset_name", "beauty2014",
//                 "--dataset_split", "validation",
//                 "--max_seq_length", "1024",
//                 "--num_beams", "5",
//                 "--batch_size", "8",
//                 "--num_return_sequences", "5",
//                 "--max_new_tokens", "50",
//                 "--load_in_4bit", "True"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/process_metadata.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--url", "https://snap.stanford.edu/data/amazon/productGraph/categoryFiles/meta_Toys_and_Games.json.gz",
//                 "--category", "Toys"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }

// python src/process_metadata.py --url https://snap.stanford.edu/data/amazon/productGraph/categoryFiles/meta_Sports_and_Outdoors.json.gz --category Sports


// python src/process_interactions.py --reviews_url https://snap.stanford.edu/data/amazon/productGraph/categoryFiles/reviews_Sports_and_Outdoors_5.json.gz --category Sports

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/process_interactions.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--reviews_url", "https://snap.stanford.edu/data/amazon/productGraph/categoryFiles/reviews_Toys_and_Games_5.json.gz",
//                 "--category", "Toys"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }


// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/make_hfdataset.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--category", "Sports"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/evaluate_baselines.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--category","sports",
//                 "--split","test",
//                 "--k", "10",
//                 "--metrics","recall@10","ndcg@10","mrr"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }
// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/generate_withbeams.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--model_name", "Llama-3.2-3B-fttoys_ep10_maxseq1024_bs4_acc4",
//                 "--dataset_name", "toys",
//                 "--dataset_split", "validation",
//                 "--max_seq_length", "1024",
//                 "--num_beams", "5",
//                 "--batch_size", "8",
//                 "--num_return_sequences", "5",
//                 "--max_new_tokens", "50",
//                 "--load_in_4bit", "True"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/generate_withbeams.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--model_name", "Llama-3.2-1B-fttoys_ep10_maxseq1024_bs4_acc4",
//                 "--dataset_name", "toys",
//                 "--dataset_split", "validation",
//                 "--max_seq_length", "1024",
//                 "--num_beams", "5",
//                 "--batch_size", "8",
//                 "--num_return_sequences", "5",
//                 "--max_new_tokens", "50",
//                 "--load_in_4bit", "True"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }



// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/calcirmetrics.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--category",
//                 "toys",
//                 "--generated_file",
//                 "llama-8b/Llama-3.1-8B-fttoys_ep10_maxseq1024_bs4_acc4_validation_beam5_max_seq1024_bs8_numret5.json",
//                 "--retriever_index",
//                 "amzntoys2014_index",
//                 "--num_sequences",
//                 "5"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }


// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/scripts/modelperf_display.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--model_name", "llama-3b",
//                 "--dataset", "beauty2014",
//                 "--retriever_index", "amznbeauty2014_index",
//                 "--num_sequences", "5",
//                 "--at_k", "5"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }

// python scripts/modelperf_display.py --model_name llama-8b --dataset beauty2014 --retriever_index amznbeauty2014_index --num_sequences 5 --at_k 5 > llama-8b-irmetricsv2.txt
// python scripts/modelperf_display.py --model_name llama-3b --dataset beauty2014 --retriever_index amznbeauty2014_index --num_sequences 5 --at_k 5 > llama-3b-irmetricsv2.txt
// python scripts/modelperf_display.py --model_name llama-1b --dataset beauty2014 --retriever_index amznbeauty2014_index --num_sequences 5 --at_k 5 > llama-1b-irmetricsv2.txt


// "--model_name", "Qwen3-0.6B-Base-beauty/checkpoint-10200",
// "gemma-3-1B/checkpoint-8300"
// llama1bcheckpoint-9700
// smol-lm2/checkpoint-11600


// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/calcirmetrics.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--category","toys",
//                 "--generated_file", "llama-1b/Llama-3.2-1B-fttoys_ep10_maxseq1024_bs4_acc4_validation_beam5_max_seq1024_bs8_numret5.json",
//                 "--retriever_index", "amzntoys2014_index",
//                 "--num_sequences", "5",

//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/scripts/calc_irmetrics_beauty2014.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--meta_file","meta_corpus.json",
//                 "--generated_file", "llama1bcheckpoint_9700_validation_temp0p5_max_seq1024.json",
//                 "--retriever_index", "amznbeauty2014_index",
//                 "--num_sequences", "5"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "1"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/finetune_with_config.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--config", "ft_configs/toys2014/llama1b_1024_toys.yml",
//                 "--dataset", "toys"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }



// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file llama1bcheckpoint-9700-cop_validation_beam5_max_seq1024v2.json --retriever_index amznbeauty2014_index --num_sequences 5
// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file qwen-checkpoint-10200_validation_beam5_max_seq1024v2.json --retriever_index amznbeauty2014_index --num_sequences 5

// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file qwen-checkpoint-10200_validation_beam5_max_seq1024v2.json --retriever_index amznbeauty2014_index --num_sequences 5

// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file llama1bcheckpoint_9700_validation_temp0p2_max_seq1024.json --retriever_index amznbeauty2014_index --num_sequences 5
// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file llama1bcheckpoint_9700_validation_temp0p1_max_seq1024.json --retriever_index amznbeauty2014_index --num_sequences 5
// llama1bcheckpoint_9700_validation_temp0p1_max_seq1024

// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file gemma-3-1b-pt-unsloth-bnb-4bit_validation_temp0p1_max_seq1024.json --retriever_index amznbeauty2014_index --num_sequences 5
// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file llama-3b-16kcpt_validation_beam5_max_seq1024v2.json --retriever_index amznbeauty2014_index --num_sequences 5
// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file llama-3b-16kcpt_validation_temp0p5_max_seq1024.json --retriever_index amznbeauty2014_index --num_sequences 5
// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file llama-3b-16kcpt_validation_temp0p2_max_seq1024.json --retriever_index amznbeauty2014_index --num_sequences 5
// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file Llama-3.2-3B-ftbeauty2014_ep15_maxseq1024_validation_beam5_max_seq1024_bs8_numret5.json --retriever_index amznbeauty2014_index --num_sequences 5
// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file llama-3b-16kcpt_validation_beam5_max_seq1024_bs8_numret5.json --retriever_index amznbeauty2014_index --num_sequences 5
// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file llama-3b-16kcpt_test_beam5_max_seq1024_bs8_numret5.json --retriever_index amznbeauty2014_index --num_sequences 5

// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file llama-8b-8.3k_test_beam5_max_seq1024_bs8_numret5.json --retriever_index amznbeauty2014_index --num_sequences 5
// python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file llama-8b-8.3k_test_beam5_max_seq1024_bs4_numret5.json --retriever_index amznbeauty2014_index --num_sequences 5


// CUDA_VISIBLE_DEVICES=1 python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file llama-8b-8.3k_validation_beam5_max_seq1024_bs8_numret5.json --retriever_index amznbeauty2014_index --num_sequences 5

// CUDA_VISIBLE_DEVICES=1 python scripts/calc_irmetrics_beauty2014.py --meta_file meta_corpus.json --generated_file llama8B-5.5k_validation_beam5_max_seq1024_bs8_numret5.json --retriever_index amznbeauty2014_index --num_sequences 5
// nohup env CUDA_VISIBLE_DEVICES=0 python /home/kacharya33/nanoGenRec/scripts/generate_candidates_beam.py \
//     --model_name llama-3b-16kcpt \
//     --dataset_name beauty2014 \
//     --dataset_split validation \
//     --max_seq_length 1024 \
//     --num_beams 5 \
//     --batch_size 8 \
//     --num_return_sequences 5 \
//     --max_new_tokens 50 \
//     --load_in_4bit True \
//     > output_16k.log 2>&1 &

// nohup env CUDA_VISIBLE_DEVICES=1 python /home/kacharya33/nanoGenRec/scripts/generate_candidates_beam.py \
//     --model_name Llama-3.2-3B-ftbeauty2014_ep15_maxseq1024 \
//     --dataset_name beauty2014 \
//     --dataset_split validation \
//     --max_seq_length 1024 \
//     --num_beams 5 \
//     --batch_size 8 \
//     --num_return_sequences 5 \
//     --max_new_tokens 50 \
//     --load_in_4bit True \
//     > output_endmodel.log 2>&1 &


// nohup env CUDA_VISIBLE_DEVICES=0 python /home/kacharya33/nanoGenRec/scripts/generate_candidates_beam.py \
//     --model_name llama-3b-16kcpt \
//     --dataset_name beauty2014 \
//     --dataset_split test \
//     --max_seq_length 1024 \
//     --num_beams 5 \
//     --batch_size 8 \
//     --num_return_sequences 5 \
//     --max_new_tokens 50 \
//     --load_in_4bit True \
//     > output_16k_test.log 2>&1 &

// nohup env CUDA_VISIBLE_DEVICES=0 python scripts/finetune_configs.py --config ft_configs/llama8b_1024_beauty.yml > finetune_llama8b_beauty.log 2>&1 &
// nohup env CUDA_VISIBLE_DEVICES=1 python scripts/finetune_configs.py --config ft_configs/llama8b_1024_beauty_smallbs.yml > finetune_llama8b_beauty_smallbs.log 2>&1 &

// # Llama 3.2-1B, 16 lora, 11M parameters, 0.045 recall@5
// # Gemma 3, 1B, 16 lora, 13M parameters
// # Qwen 3, 600M, 16 lora, 10M parameters
// # SmolLM 160M, 256 lora, 78M parameters
// # Llama 3.2 3B, 16 lora, 24M params



//  on test LIR
// # {'recall@5': np.float64(0.04333050127442651), 'ndcg@5': np.float64(0.023179244762936268), 'mrr': np.float64(0.016472894215147044)}
// # -----------------------------
// # on test LLama1BftBeauty2014 with beam search
// # Metrics: {'recall@5': np.float64(0.04534275365559182), 'ndcg@5': np.float64(0.026878945255920418), 'mrr': np.float64(0.020865566635364964)
// }

// # on validation LLama1BftBeauty2014  with beam search
// # Metrics: {'recall@5': np.float64(0.05366726296958855), 'ndcg@5': np.float64(0.03218498256886583), 'mrr': np.float64(0.025163983303518187)
// }

// # on test LLama1BftBeauty2014 with sampling 0.5
// # onn validation LLama1BftBeauty2014 with sampling, temp 0.5
// # Metrics: {'recall@5': np.float64(0.01073345259391771), 'ndcg@5': np.float64(0.006946322436661294), 'mrr': np.float64(0.005724508050089446)
// }
// # on validation llama1b sampling, temp = 0.2
// # Metrics: {'recall@5': np.float64(0.011627906976744186), 'ndcg@5': np.float64(0.008841746091621304), 'mrr': np.float64(0.007901013714967202)
// }

// # on validation llama1b sampling, temp = 0.1
// # Metrics: {'recall@5': np.float64(0.006261180679785331), 'ndcg@5': np.float64(0.005600947680807617), 'mrr': np.float64(0.005366726296958855)
// }
// # -----------------------------

//  ## Llama 8B-8.3k validation beam searched
// Metrics: {'recall@5': np.float64(0.06797853309481217), 'ndcg@5': np.float64(0.040454979838991774), 'mrr': np.float64(0.03155933214072749)}

// # Test, llama8b-8.3k 8 batch size best
// Metrics: {'recall@5': np.float64(0.06814828064213209), 'ndcg@5': np.float64(0.04232513489127515), 'mrr': np.float64(0.03390570734397591)}



// ## Llama 8B-5.5k 
// # on validation, beam searched
// Metrics: {'recall@5': np.float64(0.05813953488372093), 'ndcg@5': np.float64(0.03510785301697786), 'mrr': np.float64(0.027638640429338102)}

// #Llama3BftBeauty2014 on test
// Metrics: {'recall@5': np.float64(0.0651969771497563), 'ndcg@5': np.float64(0.04003929537456322), 'mrr': np.float64(0.031844266571271006)}

// #on validation, finetuned 16k steps, beam search
// # Metrics: {'recall@5': np.float64(0.061717352415026835), 'ndcg@5': np.float64(0.03787972431398929), 'mrr': np.float64(0.03018783542039356)
// }

// # on validation, finetuned 16k steps, sampling temp 0.5
// # Metrics: {'recall@5': np.float64(0.027728085867620753), 'ndcg@5': np.float64(0.02085487360331486), 'mrr': np.float64(0.018559928443649374)
// }

// # on validation, finetuned 16k steps, sampling temp 0.2
// # Metrics: {'recall@5': np.float64(0.024150268336314847), 'ndcg@5': np.float64(0.020414549032904978), 'mrr': np.float64(0.01915623136553369)
// }

// # on validation, finetuned 16k steps, sampling temp 0.1


// # on validaton, full finetuned model, beam search
// # Metrics: {'recall@5': np.float64(0.05992844364937388), 'ndcg@5': np.float64(0.0382845443238836), 'mrr': np.float64(0.031261180679785325)
// }
// # -----------------------------
// # on test Qwen3-0.6B-ftBeauty2014


// # on validation Qwen3-0.6B-ftBeauty2014
// # Metrics: {'recall@5': np.float64(0.01073345259391771), 'ndcg@5': np.float64(0.010286225402504472), 'mrr': np.float64(0.010137149672033392)
// }

// #Gemma3-1B-ftBeauty2014

// # valudation, not finetuned, sampling temp 0.5

// # -----------------------------

// # on val SmolLM160M-ftBeauty2014 with beam search
// # Metrics: {'recall@5': np.float64(0.0017889087656529517), 'ndcg@5': np.float64(0.0014587922661640944), 'mrr': np.float64(0.0013416815742397137)
// }

// # on val SmolLM160M-ftBeauty2014 with sampling temp 0.5
// # Metrics: {'recall@5': np.float64(0.014311270125223614), 'ndcg@5': np.float64(0.009315474775102668), 'mrr': np.float64(0.007692307692307692)
// }


// nohup env CUDA_VISIBLE_DEVICES=1 python /home/kacharya33/nanoGenRec/scripts/generate_candidates_beam.py \
//     --model_name llama8B-5.5k\
//     --dataset_name beauty2014 \
//     --dataset_split validation \
//     --max_seq_length 1024 \
//     --num_beams 5 \
//     --batch_size 8 \
//     --num_return_sequences 5 \
//     --max_new_tokens 50 \
//     --load_in_4bit True \
//     > output_8b.log 2>&1 &


// nohup env CUDA_VISIBLE_DEVICES=1 python scripts/generate_candidates_beam.py \
// --model_name llama-8b-8.3k \
// --dataset_name beauty2014 \
// --dataset_split validation \
// --max_seq_length 1024 \
// --num_beams 5 \
// --batch_size 8 \
// --num_return_sequences 5 \
// --max_new_tokens 50 \
// --load_in_4bit True \
// > gen8b_8kstep.log 2>&1 &


// nohup env CUDA_VISIBLE_DEVICES=0 python scripts/generate_candidates_beam.py \
// --model_name llama-8b-8.3k \
//     --dataset_name beauty2014 \
//     --dataset_split test \
//     --max_seq_length 1024 \
//     --num_beams 5 \
//     --batch_size 4 \
//     --num_return_sequences 5 \
//     --max_new_tokens 50 \
//     --load_in_4bit True \
//     > gen8b_8kstep_test_bs4.log 2>&1 &



// nohup env CUDA_VISIBLE_DEVICES=1 python src/finetune_with_config.py \
//     --config ft_configs/toys2014/llama8b_toysv2.yml \
//     --dataset toys \
//     > ft_llama8b_toysv2.log 2>&1 &

// nohup env CUDA_VISIBLE_DEVICES=0 python /home/kacharya33/nanoGenRec/src/finetune_with_config.py \
//     --config ft_configs/toys2014/llama3b_1024_toys.yml \
//     --dataset toys \
//     > finetune_toys3b.log 2>&1 &

// nohup env CUDA_VISIBLE_DEVICES=0 python /home/kacharya33/nanoGenRec/src/finetune_with_config.py \
//     --config ft_configs/toys2014/llama1b_1024_toys.yml \
//     --dataset toys \
//     > finetune_toys1b.log 2>&1 &


// nohup env CUDA_VISIBLE_DEVICES=1 python /home/kacharya33/nanoGenRec/src/finetune_with_config.py \
// --config ft_configs/toys2014/llama8b_1024_toys.yml \
// --dataset toys \
// > finetune_toys8b.log 2>&1 &


// nohup env CUDA_VISIBLE_DEVICES=0 python /home/kacharya33/nanoGenRec/src/generate_withbeams.py \
//     --model_name Llama-3.2-3B-fttoys_ep10_maxseq1024_bs4_acc4 \
//     --dataset_name toys \
//     --dataset_split validation \
//     --max_seq_length 1024 \
//     --num_beams 5 \
//     --batch_size 8 \
//     --num_return_sequences 5 \
//     --max_new_tokens 50 \
//     --load_in_4bit True \
//     > output_toys_validation.log 2>&1 &


// nohup env CUDA_VISIBLE_DEVICES=0 python /home/kacharya33/nanoGenRec/src/generate_withbeams.py \
//     --model_name toys-bestmodels/Llama-3.2-1B-fttoys_ep10_maxseq1024_bs4_acc4\
//     --dataset_name toys \
//     --dataset_split test \
//     --max_seq_length 1024 \
//     --num_beams 5 \
//     --batch_size 8 \
//     --num_return_sequences 5 \
//     --max_new_tokens 50 \
//     --load_in_4bit True \
//     > genop_Toys_test-1B.log 2>&1 &

// nohup env CUDA_VISIBLE_DEVICES=1 python /home/kacharya33/nanoGenRec/src/generate_withbeams.py \
//     --model_name toys-bestmodels/Llama-3.2-3B-fttoys_ep10_maxseq1024_bs4_acc4\
//     --dataset_name toys \
//     --dataset_split test \
//     --max_seq_length 1024 \
//     --num_beams 5 \
//     --batch_size 8 \
//     --num_return_sequences 5 \
//     --max_new_tokens 50 \
//     --load_in_4bit True \
//     > genop_Toys_test-3B.log 2>&1 &


// nohup env CUDA_VISIBLE_DEVICES=0 python /home/kacharya33/nanoGenRec/src/generate_withbeams.py \
//     --model_name toys-bestmodels/Llama-3.1-8B-fttoys_ep10_maxseq1024_bs4_acc4\
//     --dataset_name toys \
//     --dataset_split test \
//     --max_seq_length 1024 \
//     --num_beams 5 \
//     --batch_size 8 \
//     --num_return_sequences 5 \
//     --max_new_tokens 50 \
//     --load_in_4bit True \
//     > genop_Toys_test-8B.log 2>&1 &

// nohup env CUDA_VISIBLE_DEVICES=1 python /home/kacharya33/nanoGenRec/src/generate_withbeams.py \
//     --model_name toys-bestmodels/llama-3.1-8b-toys-10kcpt\
//     --dataset_name toys \
//     --dataset_split validation \
//     --max_seq_length 1024 \
//     --num_beams 5 \
//     --batch_size 8 \
//     --num_return_sequences 5 \
//     --max_new_tokens 50 \
//     --load_in_4bit True \
//     > genop_Toys_val-8B-10k.log 2>&1 &

// # TO RUN Finetune

// nohup env CUDA_VISIBLE_DEVICES=1 python /home/kacharya33/nanoGenRec/src/finetune_with_config.py \
//     --config ft_configs/sports2014/llama8b_1024_sports.yml \
//     --dataset sports \
//     > finetune_sports8bv2.log 2>&1 &

// nohup env CUDA_VISIBLE_DEVICES=1 python /home/kacharya33/nanoGenRec/src/finetune_with_config.py \
//     --config ft_configs/sports2014/llama1b_1024_sports.yml \
//     --dataset sports \
//     > finetune_sports1b.log 2>&1 &

// nohup env CUDA_VISIBLE_DEVICES=1 python /home/kacharya33/nanoGenRec/src/finetune_with_config.py \
//     --config ft_configs/sports2014/llama3b_1024_sports.yml \
//     --dataset sports \
//     > finetune_sports3b.log 2>&1 &


// nohup env CUDA_VISIBLE_DEVICES=0 python /home/kacharya33/nanoGenRec/src/finetune_with_config.py \
//     --config ft_configs/sports2014/llama8b_1024_sports.yml \
//     --dataset sports \
//     > finetune_sports8b.log 2>&1 &

// zip -r toys-bestmodels.zip toys-bestmodels/


// nohup env CUDA_VISIBLE_DEVICES=1 python /home/kacharya33/nanoGenRec/src/generate_withbeams.py \
//     --model_name sports-bestmodels/Llama-3.2-1B-ftsports_ep7_maxseq1024_bs4_acc4\
//     --dataset_name sports \
//     --dataset_split test \
//     --max_seq_length 1024 \
//     --num_beams 5 \
//     --batch_size 8 \
//     --num_return_sequences 5 \
//     --max_new_tokens 50 \
//     --load_in_4bit True \
//     > gen_sports_test1B.log 2>&1 &


// nohup env CUDA_VISIBLE_DEVICES=1 python /home/kacharya33/nanoGenRec/src/generate_withbeams.py \
//     --model_name toys-bestmodels/llama-8b-toys-7.2kcpt\
//     --dataset_name toys \
//     --dataset_split test \
//     --max_seq_length 1024 \
//     --num_beams 5 \
//     --batch_size 8 \
//     --num_return_sequences 5 \
//     --max_new_tokens 50 \
//     --load_in_4bit True \
//     > output_toys_test8B-7.2k.log 2>&1 &


// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/calcirmetrics.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--category", "sports",
//                 "--generated_file","llama-8b/Llama-3.1-8B-ftsports_ep7_maxseq1024_bs4_acc4_test_beam5_max_seq1024_bs8_numret5.json",
//                 "--retriever_index","amznsports2014_index",
//                 "--num_sequences","5"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }




// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/calcirmetrics_bm25.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--category", "toys",
//                 "--generated_file","llama-8b/llama-8b-toys-7.2kcpt_test_beam5_max_seq1024_bs8_numret5.json",
//                 "--retriever_index","amzntoys2014_index",
//                 "--num_sequences","5"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/calcirmetrics_dense-minilm.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--category", "toys",
//                 "--generated_file","llama-1b/Llama-3.2-1B-fttoys_ep10_maxseq1024_bs4_acc4_validation_beam5_max_seq1024_bs8_numret5.json",
//                 "--split","test",
//                 "--short_model_name","llama-1b"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/calcirmetrics_dense-minilm.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--category", "toys",
//                 "--generated_file", "llama-3b/Llama-3.2-3B-fttoys_ep10_maxseq1024_bs4_acc4_test_beam5_max_seq1024_bs8_numret5.json",
//                 "--split", "test",
//                 "--short_model_name", "llama-3b"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }



// nohup env CUDA_VISIBLE_DEVICES=0 /bin/bash get_dense_ret_metrics_test.sh > get_dense_ret_metrics_test.log 2>&1 &


// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/process_metadata.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--url", "https://mcauleylab.ucsd.edu/public_datasets/data/amazon_v2/metaFiles2/meta_Video_Games.json.gz",
//                 "--category", "Games"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/process_interactions.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--reviews_url","https://mcauleylab.ucsd.edu/public_datasets/data/amazon_v2/categoryFilesSmall/Video_Games_5.json.gz",
//                 "--category", "Games"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Python Debugger: Current File with Arguments",
//             "type": "debugpy",
//             "request": "launch",
//             "program": "/home/kacharya33/nanoGenRec/src/make_hfdataset.py",
//             "console": "integratedTerminal",
//             "args": [
//                 "--category", "Games"
//             ],
//             "env": {
//                 "CUDA_VISIBLE_DEVICES": "0"
//             }
//         }
//     ]
// }

{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python Debugger: Current File with Arguments",
            "type": "debugpy",
            "request": "launch",
            "program": "/home/kacharya33/nanoGenRec/src/movielens-specific-processing.py",
            "console": "integratedTerminal",
            "env": {
                "CUDA_VISIBLE_DEVICES": "0"
            }
        }
    ]
}


// https://snap.stanford.edu/data/amazon/productGraph/categoryFiles/reviews_Video_Games_5.json.gz
// https://snap.stanford.edu/data/amazon/productGraph/categoryFiles/meta_Video_Games.json.gz # this is incomplete!!
